# RC_CAR_pjt

# 추가 구현

우선 자율주행이 구현이 되어야한다.

현재 내가 있는 차선과,  +앞으로 내 목적지에 따른 차선 변경(향후 좌회전을 해야한다면 1차선으로, 뭐 이런? (카메라)

앞에 장애물이 있다고 판단이 되었을 경우, data sensing (초음파센서)

left(좌회전, 또는 왼쪽의 차선으로 변경) 받았을 경우 바로 sense 에 보여주고 잠깐 딜레이 후에 해당 센싱을 수행

rigjt도 마찬가지

일시정지의 경우에도 마찬가지이다 . 

차선 변경을 하는 pwm을 left, lright값 설정

버튼으로 안전벨트 구현 -> led off상태면 자율주행 X , 안전벨트 착용 알림 울리게

버튼으로 안전벨트 구현

- 버튼이 눌려있으면 안전벨트가 채워져있다고 판단 출발

버튼이 계속해서 눌려있는지 확인해야하니까.

버튼이 눌릴경우 어떤 상수값을 바꿔놓고 목적지에 도착할 경우 탑승자가 하차했다고 판단해서 상수값을 원래대로 돌리자.

- 동작 명령 받았을 때, 버튼이 눌려져있지 않을 경우 안전벨트 착용 알림이 울리게!

left 또는 right신호를 받으면 반영해야할듯..

차선 변경 시에 led구현 -> 좌/우/정지 시에 색상변경

일정 값 이상으로 375(중앙)과 차이가 났을 경우 차선이 변경되었다고 판단.

변경될 경우 sensehat hat을 통해서 / 또는 led두개를 추가로 달아서

좌회전, 우회전, 일시정지(양측) 불빛이 들어오게 구현

SensHat으로 색 변경 구현 

## 2. **원격조정기**

원격조정기는 Raspberry Pi 4 + Qt로 만들어진다. 사용자 입력에 따라 RC카를 원격 조정할 수 있는 시스템이다. 창작 활동으로, 원격 조정기가 사람의 입력 없이 Sensing한 Data를 기반으로 RC Car에게 스스로 명령을 내리는 AI 기능을 추가할 수도 있다.

→ 자율주행

: 초음파센서를 활용하자?

[https://www.aitimes.kr/news/articleView.html?idxno=2316](https://www.aitimes.kr/news/articleView.html?idxno=23169)

[http://www.igameplus.com/pds/OpenCV-RaspberryPi-Autonomous-Car-KIT-manual-v1_0.pdf](http://www.igameplus.com/pds/OpenCV-RaspberryPi-Autonomous-Car-KIT-manual-v1_0.pdf)

가속도센서를 이용해서 제동거리 계산

더 나아가서

온습도센서를 이용해서 날이 더운 날은 마찰이 더 생기니까 제동거리를 좀 더 길게 설정

날이 습할 경우 비가 올 수도 있으니까 제동거리를 좀 더 길게 설정

목적지를 설정해서 장애물 피해가는 것
빠르고 정확하게
+
속도 조절(적합한 가속도) , 영상처리(장애물 인식) => 라인 인식해서 주차
+
차별점..?

차선 변경 시에 led구현 -> 좌/우/정지 시에 색상변경
버튼으로 안전벨트 구현 -> led off상태면 자율주행 X , 안전벨트 착용 알림 울리게
앞에 물체 인식 -> 클락션
주행거리 계산해서 연료충전관련 알림 구현( 버튼? ui?)

주차 관리 시스템 (아파트 주차장 -> RFID모듈로 모터제어, 자율주행으로 주차 구현)
차량에 충격이 가해졌을 때, 카메라로 찍어서 서버에 사진 전송 / 로컬에 저장)

초음파센서 구현 →  왼쪽 거리보다 오른쪽 거리가 짧으면 좌회전,

오른쪽거리가 왼쪽 거리보다 짧으면 우회전

그리고 중간에 튀는 값(멀리서 돌아오는 값)을 방지하기 위해서 50보다 크면 50으로 설정하자

둘 중 작은 값을 DB에 넘기고

넘어온 값이 30?보다 작으면 회전 ㄴㄴ LED 켜라는 명령 전달

LED가 켜지는 상태가 되면 그 방향으로 회전하라는 명령 전달

충격센서 달아서 충격이 감지되면 → 카메라 촬영 → DB에 전송 → 운행중단

안전벨트

버튼, LED

버튼이 눌리면 LED를 켜지게 하자

출발 명령을 받으면 LED의 상태를 확인하고 켜져 있다면 출발

꺼져 있다면 안전벨트를 매라는 경고 메세지 출력

그럼 둘 중 작은 값이 50보다^ 30정도보다..? 맵의 크기를 고려해서 장애물판단 작을경우

장애물이 가까이에 있다고 판단! → 차선변경이나 회전을 하라는 신호를 보낸다 / LED 표현

[5편 : 라즈베리 파이 카메라 사용하기 : 네이버 블로그 (naver.com)](https://blog.naver.com/PostView.nhn?blogId=ljy9378&logNo=221431122137)

라인 인식

[Google Colaboratory](https://colab.research.google.com/drive/1NX_1DfeozzOK74xkmDw55erqqJKkM3Hl)

1. Start 신호 받으면
2. 안전벨트 상태를 먼저 확인
    1. yes면 → 출발
    2. no면 → 빨간불(LED 토글)
3. 거리값 읽어옴 : 3개
4. 전진 상태 : 왼쪽, 오른쪽 읽어올 예정 / 후진상태 : 후방을 읽어올 예정
5. 장애물이 있으면 50보다 작은 값이 읽힌다.
6. 50보다 작은 값이 읽혔어. → 왼쪽, 오른쪽 비교
7. 45보다 작으면
    1. 회전방향 정하고
    2. 그에 따른 LED 토글 신호를 보내고
    3. PWM 앞바퀴 제어 신호를 보낸다(회전)
    4. 일정 시간 딜레이주고 나서 다시 PWM 원상복구
    

1. 충격센서에 값이 생기면? 사진 촬영 후, DB에 저장

[[Protocol] MQTT Protocol 이란 ?, Python 으로 MQTT 실행하기](https://mishuni.tistory.com/57)

1. 출발/ 정지 -? MQTT out
    1. 출발 신호 → 안전벨트 확인 
        1. O : mqtt in (belt)
        2. X : mqtt in (no belt)

1. /speed    MQTT in  → 속도게이지 , 0보다 크면 주행여부 켜고

충격 감지 → 신호 발행 → mqtt 받아서
